<!DOCTYPE html>
<html lang="ru" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–≤–æ–π –∫–æ—Ñ–µ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/typed.js@2.0.16/dist/typed.umd.js"></script>
    <style>
        .coffee-card {
            transform-style: preserve-3d;
            perspective: 1000px;
            transition: transform 0.5s ease;
        }
        
        .coffee-card:hover {
            transform: rotateX(10deg) rotateY(10deg);
        }
        
        .typewriter {
            /* overflow: hidden; */
            border-right: 2px solid #92400e;
            white-space: nowrap;
            margin: 0 auto;
            animation: typing 3.5s steps(40, end),
                       blink-caret 0.75s step-end infinite;
        }
        
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: #92400e }
        }

        /* –ü—Ä–∏–º–µ–Ω—è–µ–º typewriter —ç—Ñ—Ñ–µ–∫—Ç —Ç–æ–ª—å–∫–æ –∫ –∑–∞–≥–æ–ª–æ–≤–∫—É –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ */
        .coffee-card h1.typewriter {
             /* –£–¥–∞–ª—è–µ–º overflow: hidden –∏ white-space: nowrap, —á—Ç–æ–±—ã —Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–Ω–æ—Å–∏–ª—Å—è */
             white-space: normal; /* –†–∞–∑—Ä–µ—à–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å —Ç–µ–∫—Å—Ç–∞ */
             overflow: visible; /* –†–∞–∑—Ä–µ—à–∞–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å –≤—Å–µ–≥–æ —Ç–µ–∫—Å—Ç–∞ */
             border-right: none; /* –£–±–∏—Ä–∞–µ–º –∫—É—Ä—Å–æ—Ä –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–∫–µ, –µ—Å–ª–∏ –æ–Ω –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è */
             animation: none; /* –û—Ç–∫–ª—é—á–∞–µ–º typewriter –∞–Ω–∏–º–∞—Ü–∏—é –¥–ª—è –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ */
        }

        /* –†–∞–∑—Ä–µ—à–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞ –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ */
        .coffee-card p {
            white-space: normal;
            overflow: visible;
        }

        .coffee-image {
            transition: transform 0.3s ease;
        }
        
        .coffee-image:hover {
            transform: scale(1.05);
        }

        .footer-wave {
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%2392400e' fill-opacity='0.1' d='M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,149.3C960,160,1056,160,1152,138.7C1248,117,1344,75,1392,53.3L1440,32L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
            background-size: cover;
            background-position: center;
        }

        /* –ù–æ–≤—ã–π —Å—Ç–∏–ª—å –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –ø–µ—Ä–µ–Ω–æ—Å —Ç–µ–∫—Å—Ç–∞ */
        /* .typewriter-desc {
             overflow: hidden;
             border-right: 2px solid #92400e;
             white-space: normal;
             margin: 0 auto;
        } */
    </style>
</head>
<body class="bg-gradient-to-b from-amber-50 to-amber-100 dark:from-gray-900 dark:to-gray-800 min-h-screen transition-colors duration-300">
    <!-- –®–∞–ø–∫–∞ -->
    <header class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm shadow-lg">
        <nav class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <a href="index.html" class="text-2xl font-playfair font-bold text-amber-900 dark:text-amber-100 hover:text-amber-700 dark:hover:text-amber-300 transition-colors">
                    KofiMood ‚òï
                </a>
                <div class="flex items-center space-x-4">
                    <a href="index.html" class="text-amber-800 dark:text-amber-200 hover:text-amber-600 dark:hover:text-amber-400 transition-colors">
                        –ì–ª–∞–≤–Ω–∞—è
                    </a>
                    <a href="quiz.html" class="text-amber-800 dark:text-amber-200 hover:text-amber-600 dark:hover:text-amber-400 transition-colors">
                        –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <div class="theme-toggle fixed top-4 right-4 z-50">
        <button id="themeToggle" class="p-2 rounded-full bg-amber-200 dark:bg-gray-700 hover:scale-110 transition-transform">
            <svg class="w-6 h-6 dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
            </svg>
            <svg class="w-6 h-6 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707"/>
            </svg>
        </button>
    </div>

    <main class="container mx-auto px-4 py-16 max-w-2xl">
        <div class="text-center space-y-8">
            <h1 class="text-3xl md:text-4xl font-bold text-amber-900 dark:text-amber-100 typewriter">
                –ö–∞–∫–æ–π –∫–æ—Ñ–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –≤–∞–º?
            </h1>

            <div id="result" class="coffee-card relative p-8 bg-white/80 dark:bg-gray-800/80 rounded-2xl shadow-xl">
                <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω —á–µ—Ä–µ–∑ JavaScript -->
            </div>
        </div>
    </main>

    <!-- –§—É—Ç–µ—Ä -->
    <footer class="footer-wave mt-16 py-8">
        <div class="container mx-auto px-4">
            <div class="text-center text-amber-900 dark:text-amber-100">
                <p class="text-sm">–°–¥–µ–ª–∞–Ω–æ —Å –ª—é–±–æ–≤—å—é –∫ –∫–æ—Ñ–µ ‚òï</p>
                <p class="text-xs mt-2">¬© 2024 –ö–æ—Ñ–µ–¢–µ—Å—Ç. –í—Å–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∫–æ—Ñ–µ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
        </div>
    </footer>

    <script type="module">
        const coffeeTypes = {
            zombie: {
                title: "‚ò†Ô∏è –í–∑—Ä—ã–≤–Ω–æ–π –∞–º–µ—Ä–∏–∫–∞–Ω–æ –¥–ª—è –∑–æ–º–±–∏",
                desc: "–¢—ã –µ–ª–µ –æ—Ç–∫—Ä—ã–ª –≥–ª–∞–∑–∞? –¢—Ä–æ–π–Ω–æ–π —à–æ—Ç ‚Äî –∏–ª–∏ —Å–Ω–æ–≤–∞ —É—Å–Ω—ë—à—å –≤ –ª–∏—Ñ—Ç–µ.",
                bg: "bg-gradient-to-br from-gray-900 to-amber-900",
                image: "https://images.unsplash.com/photo-1514432324607-a09d9b4aefdd?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3"
            },
            squirrel: {
                title: "üêøÔ∏è –≠–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π —ç—Å–ø—Ä–µ—Å—Å–æ",
                desc: "–¢—ã –ø–æ–ª–æ–Ω —ç–Ω–µ—Ä–≥–∏–∏! –ö—Ä–µ–ø–∫–∏–π —ç—Å–ø—Ä–µ—Å—Å–æ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –µ—ë –≤ –Ω—É–∂–Ω–æ–µ —Ä—É—Å–ª–æ.",
                bg: "bg-gradient-to-br from-amber-600 to-amber-800",
                image: "https://images.unsplash.com/photo-1510591509098-f4fdc6d0ff04?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3"
            },
            mystery: {
                title: "ü§î –ó–∞–≥–∞–¥–æ—á–Ω—ã–π –ª–∞—Ç—Ç–µ",
                desc: "–¢—ã –µ—â—ë –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–∏–ª—Å—è —Å –ø–ª–∞–Ω–∞–º–∏? –ù–µ–∂–Ω—ã–π –ª–∞—Ç—Ç–µ —Å–æ–∑–¥–∞—Å—Ç –∏–¥–µ–∞–ª—å–Ω—É—é –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –¥–ª—è —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–π.",
                bg: "bg-gradient-to-br from-amber-400 to-amber-600",
                image: "https://images.unsplash.com/photo-1561882468-9110e03e0f78?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3"
            }
        };

        const coffeeMemes = [
            "–ö–æ—Ñ–µ ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ —Ç—ã –ø–ª–∞—Ç–∏—à—å –∑–∞ —Ç–æ, —á—Ç–æ–±—ã –ø—Ä–æ—Å–Ω—É—Ç—å—Å—è, –∞ –ø–æ—Ç–æ–º –ø–ª–∞—Ç–∏—à—å –∑–∞ —Ç–æ, —á—Ç–æ–±—ã —É—Å–Ω—É—Ç—å.",
            "–ú–æ–π –∫–æ—Ñ–µ —Ç–∞–∫–æ–π –∫—Ä–µ–ø–∫–∏–π, —á—Ç–æ –º–æ–∂–µ—Ç –ø–æ–¥–Ω—è—Ç—å –¥–∞–∂–µ –º–µ—Ä—Ç–≤–æ–≥–æ.",
            "–ö–æ—Ñ–µ ‚Äî —ç—Ç–æ –∫–∞–∫ –æ–±—ä—è—Ç–∏—è –≤ —á–∞—à–∫–µ.",
            "–Ø –Ω–µ –º–æ–≥—É –Ω–∞—á–∞—Ç—å –¥–µ–Ω—å, –ø–æ–∫–∞ –Ω–µ –≤—ã–ø—å—é –∫–æ—Ñ–µ. –ò –¥–∞–∂–µ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –Ω–µ –º–æ–≥—É.",
        ];

        function getCoffeeType(answers) {
            if (answers.wakeup === 'zombie') return 'zombie';
            if (answers.wakeup === 'squirrel') return 'squirrel';
            return 'mystery';
        }

        function renderResult() {
            const params = new URLSearchParams(window.location.search);
            const answers = {
                wakeup: params.get('wakeup'),
                plans: params.get('plans'),
                style: params.get('style')
            };

            const coffeeType = getCoffeeType(answers);
            const coffee = coffeeTypes[coffeeType];

            const resultHtml = `
                <div class="${coffee.bg} rounded-2xl text-white p-8">
                    <div class="grid md:grid-cols-5 gap-8 items-center">
                        <div class="md:col-span-3">
                            <h1 class="text-3xl md:text-4xl font-bold mb-4 typewriter">${coffee.title}</h1>
                            <p class="text-xl mb-8">${coffee.desc}</p>
                            <a href="quiz.html" 
                               class="inline-block px-8 py-4 bg-gradient-to-b from-amber-600 to-amber-800 text-white rounded-full text-xl font-semibold hover:from-amber-700 hover:to-amber-900 transition-colors">
                                –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –≤–∞—Ä–∏–∞–Ω—Ç
                            </a>
                        </div>
                        <div class="md:col-span-2 coffee-image">
                            <img src="${coffee.image}" 
                                 alt="${coffee.title}" 
                                 class="rounded-xl shadow-lg w-full h-64 object-cover">
                        </div>
                    </div>
                </div>
                <p class="text-amber-800 dark:text-amber-200 mt-8">
                    –ù–∞—à–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ 73% –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã, –Ω–æ –Ω–∞ 100% –≤–∫—É—Å–Ω—ã
                </p>
            `;

            document.getElementById('result').innerHTML = resultHtml;

            // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –º–µ–º
            setTimeout(() => {
                const meme = coffeeMemes[Math.floor(Math.random() * coffeeMemes.length)];
                const memeElement = document.createElement('p');
                memeElement.className = 'text-amber-800 dark:text-amber-200 mt-4 italic';
                memeElement.textContent = meme;
                document.getElementById('result').appendChild(memeElement);
            }, 3000);

            // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è"
            if (navigator.share) {
                const shareButton = document.createElement('button');
                shareButton.className = 'mt-4 px-4 py-2 bg-amber-600 text-white rounded-full';
                shareButton.textContent = '–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º';
                shareButton.addEventListener('click', async () => {
                    try {
                        await navigator.share({
                            title: coffee.title,
                            text: coffee.desc,
                            url: window.location.href
                        });
                    } catch (err) {
                        console.log('–û—à–∏–±–∫–∞ –ø—Ä–∏ —à–µ—Ä–∏–Ω–≥–µ:', err);
                    }
                });
                document.getElementById('result').appendChild(shareButton);
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        renderResult();

        // –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã
        const themeToggle = document.getElementById('themeToggle');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');
        
        function setTheme(isDark) {
            document.documentElement.classList.toggle('dark', isDark);
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            setTheme(savedTheme === 'dark');
        } else {
            setTheme(prefersDark.matches);
        }

        themeToggle.addEventListener('click', () => {
            const isDark = document.documentElement.classList.contains('dark');
            setTheme(!isDark);
        });

        // –°–ª—É—à–∞—Ç–µ–ª—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω–æ–π —Ç–µ–º—ã
        prefersDark.addEventListener('change', (e) => {
            if (!localStorage.getItem('theme')) {
                setTheme(e.matches);
            }
        });
    </script>
</body>
</html>
